<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: wget | The Abigail Oath]]></title>
  <link href="http://deadc.org/blog/categories/wget/atom.xml" rel="self"/>
  <link href="http://deadc.org/"/>
  <updated>2012-11-10T16:04:36-02:00</updated>
  <id>http://deadc.org/</id>
  <author>
    <name><![CDATA[deadc]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[O mod_gzip está funcionando?]]></title>
    <link href="http://deadc.org/blog/2012/10/26/o-mod-gzip-esta-funcionando/"/>
    <updated>2012-10-26T17:58:00-02:00</updated>
    <id>http://deadc.org/blog/2012/10/26/o-mod-gzip-esta-funcionando</id>
    <content type="html"><![CDATA[<p>Um jeito simples de verificar se seu site está realmente enviando paginas comprimidas para o cliente, sem ter que instalar um plugin no seu browser é utilizar o parametro <code>--header</code> do wget.</p>

<p><blockquote><p>--header=header-line</p></p><p><pre><code>Send header-line along with the rest of the headers in each HTTP request.  The supplied header is sent as-is, which means it must contain name and value separated by colon, and must not contain newlines.<br/></code></pre></p><p><p></p><footer><strong>man wget</strong> <cite>Retirado Do Manual Pages</cite></footer></blockquote></p>

<p>Passando ao parametro <code>--header</code> do wget <code>Accept-Encoding: gzip</code> é possivel baixar a página comprimida, claro se o servidor tiver esta opção</p>

<pre>
deadcow@jazz ~ $ wget --header='Accept-Encoding: gzip' \
http://www.uol.com.br -O sample.gz
--2012-10-26 18:07:56--  http://www.uol.com.br/
Resolving www.uol.com.br... 200.221.2.45, 200.147.67.142
Connecting to www.uol.com.br|200.221.2.45|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Saving to: ‘sample.gz’

    [  <=>                               ] 86,339       211KB/s   in 0.4s

2012-10-26 18:07:57 (211 KB/s) - ‘sample.gz’ saved [86339]

deadcow@jazz ~ $ file sample.gz
sample.gz: gzip compressed data, from Unix
deadcow@jazz ~ $
</pre>


<p>Já se o servidor não oferece este recurso, o comando <code>file</code> retornará uma página html normal</p>

<pre>
deadcow@jazz ~ $ wget --header='Accept-Encoding: gzip' \
http://www.blunt.com.br -O sample.gz
--2012-10-26 18:08:17--  http://www.blunt.com.br/
Resolving www.blunt.com.br... 216.14.115.179
Connecting to www.blunt.com.br|216.14.115.179|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Saving to: ‘sample.gz’

    [     <=>                            ] 45,874      53.6KB/s   in 0.8s

2012-10-26 18:08:19 (53.6 KB/s) - ‘sample.gz’ saved [45874]

deadcow@jazz ~ $ file sample.gz
sample.gz: HTML document, ISO-8859 text, with very long lines, \
with CR, LF line terminators
deadcow@jazz ~ $
</pre>


<p>Além do <code>Accept-Encoding: gzip</code>, você pode passar qualquer parametro para o servidor, substituindo os valores padrões do wget, muito util para testar alguns redirecionamentos</p>

<pre>
deadcow@jazz ~ $ wget --header='Host: ig.com.br' \
http://www.uol.com.br
--2012-10-26 18:14:45--  http://www.uol.com.br/
Resolving www.uol.com.br... 200.221.2.45, 200.147.67.142
Connecting to www.uol.com.br|200.221.2.45|:80... connected.
HTTP request sent, awaiting response... 302 Found
Location: http://www.uol.com.br/ [following]
[...]
Connecting to www.uol.com.br|200.221.2.45|:80... connected.
HTTP request sent, awaiting response... 302 Found
Location: http://www.uol.com.br/ [following]
--2012-10-26 18:14:47--  http://www.uol.com.br/
Connecting to www.uol.com.br|200.221.2.45|:80... connected.
HTTP request sent, awaiting response... 302 Found
Location: http://www.uol.com.br/ [following]
20 redirections exceeded.
deadcow@jazz ~ $
</pre>


<p>Dica retirada do site <a href="http://www.cyberciti.biz/faq/unix-linux-wget-download-compressed-gzip-headers">nixcraft</a></p>
]]></content>
  </entry>
  
</feed>
